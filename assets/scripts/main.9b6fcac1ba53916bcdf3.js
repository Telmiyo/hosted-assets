(()=>{"use strict";var t,e={223:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Connection=void 0;var i=n(652),o=function(){function t(t,e,n,i){this.scene=t,this.startPos=e,this.endPos=n,this.color=i,this.lineGraphic=this.scene.add.graphics(),this.createConnection()}return t.prototype.createConnection=function(){this.lineGraphic.lineStyle(15,(0,i.getColorHexValue)(this.color),1),this.lineGraphic.beginPath(),this.lineGraphic.moveTo(this.startPos.x,this.startPos.y),this.lineGraphic.lineTo(this.endPos.x,this.endPos.y),this.lineGraphic.closePath(),this.lineGraphic.strokePath()},t.prototype.removeConnection=function(){this.lineGraphic.destroy(),this.startPos=null,this.endPos=null,this.color=null,this.lineGraphic=null,this.scene=null},t.prototype.getTargetPosition=function(){return this.endPos},t}();e.Connection=o},98:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(652),s=function(t){function e(e,n,i,o){var r=t.call(this,e,"drag-indicator")||this;return r.scene=e,r.startX=n,r.startY=i,r.color=o,r.lineGraphic=null,r.lineWidth=15,r.isVisible=!0,r.scene.input.on("pointermove",r.onPointerMove,r),r.scene.input.on("pointerup",r.onPointerUp,r),r}return o(e,t),e.prototype.onPointerMove=function(t){var e=t.x,n=t.y;null==this.lineGraphic&&(this.lineGraphic=this.scene.add.graphics()),this.isVisible?(this.lineGraphic.clear(),this.lineGraphic.lineStyle(this.lineWidth,(0,r.getColorHexValue)(this.color),1),this.lineGraphic.beginPath(),this.lineGraphic.moveTo(this.startX,this.startY),this.lineGraphic.lineTo(e,n),this.lineGraphic.closePath(),this.lineGraphic.strokePath()):this.lineGraphic.clear()},e.prototype.onPointerUp=function(t){this.lineGraphic.clear(),this.lineGraphic.destroy(),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.connectionManager.completeConnection(),this.lineGraphic=null,this.scene=null,this.isVisible=null,this.color=null,this.startX=null,this.startY=null},e.prototype.setPos=function(t,e){this.startX=t,this.startY=e},e.prototype.getPos=function(){},e.prototype.hideIndicator=function(){this.isVisible=!1},e.prototype.showIndicator=function(){this.isVisible=!0},e}(Phaser.GameObjects.GameObject);e.default=s},956:function(t,e){var n,i=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,n,i,o,r){var s=t.call(this,e,n,i,o)||this;return s.gridPos=r,s.setInteractive(),s.addConnectionListener(),s}return i(e,t),e.prototype.preUpdate=function(e,n){t.prototype.preUpdate.call(this,e,n)},e.prototype.setSize=function(e){return t.prototype.setSize.call(this,16,e),this.body.setOffset(0,this.height-e),this},e.prototype.playAudio=function(t){return this.scene.sound.play(t,{volume:.5}),this},e.prototype.addConnectionListener=function(){var t=this;this.on("pointerover",(function(){t.scene.connectionManager.isActive()?t.scene.connectionManager.tryConnection(t):t.scene.connectionManager.initConnection(t)}))},e.prototype.getPos=function(){return{x:this.x,y:this.y}},e}(Phaser.Physics.Arcade.Sprite);e.default=o},206:(t,e,n)=>{n(260);var i=n(859),o=n(78),r={type:Phaser.AUTO,width:"100%",height:"100%",input:{keyboard:!0,gamepad:!0},render:{pixelArt:!0,antialias:!1,antialiasGL:!1},physics:{default:"arcade",arcade:{debug:!1,gravity:{y:0}}},scene:[i.default,o.default]};window.addEventListener("load",(function(){return new Phaser.Game(r)}))},110:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=n(98),o=n(223),r=n(652),s=function(){function t(t){this.scene=t,this.dragIndicator=null,this.isConnectionActive=!1,this.isRectangleConnection=!1,this.connectionBalls=[],this.connectionLines=[],this.color=null}return t.prototype.initConnection=function(t){this.color=t.texture.key,this.dragIndicator=new i.default(this.scene,t.x,t.y,this.color),this.isConnectionActive=!0,this.connectionBalls.push(t)},t.prototype.tryConnection=function(t){if(this.connectionBalls[this.connectionBalls.length-2]===t)return this.removeConnection(),!1;if(this.isRectangleConnection)return!1;if(this.isBallOnTheList(t)&&t!==this.connectionBalls[0])return!1;var e=this.checkAdjacent(this.getLastBall(),t),n=this.checkColors(t.texture.key);return!(!e||!n||(this.checkRectangle()&&!this.isRectangleConnection?(this.isRectangleConnection=!0,this.addConnection(t),this.dragIndicator.hideIndicator(),navigator.vibrate(1e3),0):(this.addConnection(t),0)))},t.prototype.checkRectangle=function(){if(4===this.connectionBalls.length){var t=[this.connectionBalls[0],this.connectionBalls[1],this.connectionBalls[2],this.connectionBalls[3]].sort((function(t,e){return t.gridPos.i===e.gridPos.i?t.gridPos.j-e.gridPos.j:t.gridPos.i-e.gridPos.i})),e=t[0],n=t[1],i=t[2],o=t[3];return e.gridPos.i===n.gridPos.i&&e.gridPos.j===i.gridPos.j&&n.gridPos.j===o.gridPos.j&&i.gridPos.i===o.gridPos.i}},t.prototype.addConnection=function(t){this.dragIndicator.setPos(t.x,t.y),this.connectionLines.push(new o.Connection(this.scene,this.getLastBall().getPos(),t.getPos(),this.color)),this.connectionBalls.push(t),console.log("ball added")},t.prototype.removeConnection=function(){this.connectionBalls.pop(),this.connectionLines.pop().removeConnection(),this.dragIndicator.setPos(this.getLastBall().x,this.getLastBall().y),this.isRectangleConnection&&(this.isRectangleConnection=!1,this.dragIndicator.showIndicator())},t.prototype.getLastBall=function(){return(0,r.getArrayLastValue)(this.connectionBalls)},t.prototype.isActive=function(){return this.isConnectionActive},t.prototype.checkAdjacent=function(t,e){return 1===Math.abs(t.gridPos.i-e.gridPos.i)&&t.gridPos.j===e.gridPos.j||t.gridPos.i===e.gridPos.i&&1===Math.abs(t.gridPos.j-e.gridPos.j)},t.prototype.addBall=function(t){var e=this.connectionBalls[this.connectionBalls.length-1],n=this.checkAdjacent(e,t),i=this.checkColors(t.texture.key);n&&i&&(this.connectionBalls.push(t),this.dragIndicator.setPos(t.x,t.y))},t.prototype.removeBall=function(t){var e=this.connectionBalls.indexOf(t);-1!==e&&this.connectionBalls.splice(e,1)},t.prototype.isBallOnTheList=function(t){return-1!==this.connectionBalls.indexOf(t)},t.prototype.completeConnection=function(){var t=this;this.isRectangleConnection?(this.scene.level1.removeAllColoredBalls(this.color),this.dragIndicator.showIndicator(),this.isRectangleConnection=!1):this.connectionBalls.length>1&&this.connectionBalls.forEach((function(e){t.scene.level1.removeBallFromLevel(e)}));for(var e=0,n=this.connectionLines;e<n.length;e++)n[e].removeConnection();this.dragIndicator&&null!=this.dragIndicator&&(this.dragIndicator.destroy(),this.dragIndicator=null),this.connectionBalls=[],this.connectionLines=[],this.isConnectionActive=!1},t.prototype.checkColors=function(t){return this.color===t},t}();e.default=s},78:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(110),s=n(462),c=function(t){function e(){return t.call(this,{key:"game",active:!1,visible:!1})||this}return o(e,t),e.prototype.create=function(){this.cameras.main.setBackgroundColor(13882323),this.connectionManager=new r.default(this),this.level1=new s.default(this,5,5)},Object.defineProperty(e.prototype,"inputs",{get:function(){return this._inputs},enumerable:!1,configurable:!0}),e}(Phaser.Scene);e.default=c},859:function(t,e){var n,i=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.preload=function(){this.load.image("red","https://raw.githubusercontent.com/Telmiyo/hosted-assets/main/assets/images/red.png"),this.load.image("blue","https://raw.githubusercontent.com/Telmiyo/hosted-assets/main/assets/images/blue.png"),this.load.image("green","https://raw.githubusercontent.com/Telmiyo/hosted-assets/main/assets/images/green.png"),this.load.image("yellow","https://raw.githubusercontent.com/Telmiyo/hosted-assets/main/assets/images/yellow.png")},e.prototype.create=function(){this.scene.start("game")},e}(Phaser.Scene);e.default=o},652:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getArrayLastValue=e.getColorHexValue=void 0,e.getColorHexValue=function(t){return{red:15289952,green:7848601,blue:7441855,yellow:16698988}[t.toLowerCase()]||null},e.getArrayLastValue=function(t){return t[t.length-1]}},462:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=n(956),o=function(){function t(t,e,n){this.scene=t,this.width=e,this.height=n,this.grid=[],this.createGrid()}return t.prototype.createGrid=function(){for(var t=["blue","green","red","yellow"],e=150,n=this.scene.cameras.main.width,o=this.scene.cameras.main.height,r=(n-(166*this.width-e))/2-e,s=(o-(166*this.height-e))/2-e,c=0;c<this.height;c++)for(var a=0;a<this.width;a++){var l=r+166*c+e,h=s+166*a+e,u=Phaser.Utils.Array.GetRandom(t),p=new i.default(this.scene,l,h,u,{i:c,j:a});this.scene.add.existing(p),this.grid.push(p)}},t.prototype.updateGrid=function(){},t.prototype.removeBallFromLevel=function(t){var e=this.grid.indexOf(t);-1!==e&&this.grid.splice(e,1),this.updateGrid(),t.destroy()},t.prototype.removeAllColoredBalls=function(t){var e=this;this.grid.filter((function(e){return e.texture.key===t})).forEach((function(t){var n=e.grid.indexOf(t);-1!==n&&e.grid.splice(n,1),t.destroy()})),this.updateGrid()},t}();e.default=o}},n={};function i(t){var o=n[t];if(void 0!==o)return o.exports;var r=n[t]={exports:{}};return e[t].call(r.exports,r,r.exports,i),r.exports}i.m=e,t=[],i.O=(e,n,o,r)=>{if(!n){var s=1/0;for(h=0;h<t.length;h++){for(var[n,o,r]=t[h],c=!0,a=0;a<n.length;a++)(!1&r||s>=r)&&Object.keys(i.O).every((t=>i.O[t](n[a])))?n.splice(a--,1):(c=!1,r<s&&(s=r));if(c){t.splice(h--,1);var l=o();void 0!==l&&(e=l)}}return e}r=r||0;for(var h=t.length;h>0&&t[h-1][2]>r;h--)t[h]=t[h-1];t[h]=[n,o,r]},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={179:0};i.O.j=e=>0===t[e];var e=(e,n)=>{var o,r,[s,c,a]=n,l=0;if(s.some((e=>0!==t[e]))){for(o in c)i.o(c,o)&&(i.m[o]=c[o]);if(a)var h=a(i)}for(e&&e(n);l<s.length;l++)r=s[l],i.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return i.O(h)},n=self.webpackChunkphaser_webpack=self.webpackChunkphaser_webpack||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var o=i.O(void 0,[426],(()=>i(206)));o=i.O(o)})();